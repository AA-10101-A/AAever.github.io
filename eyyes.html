<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Eyes Follow the Text</title>
  <style>
    @font-face {
      font-family: a;
      src: url(./Fedra\ Arabic\ Display\ AR\ LT\ Black.ttf);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: lightblue;
      overflow: hidden;
      touch-action: none;
    }

    .eyes {
      display: flex;
      gap: 2rem;
    }

    .eye {
      width: 100px;
      height: 100px;
      background: #fff;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      border: 3px solid #fff;
      position: relative;
      overflow: hidden;
    }

    .pupil {
      width: 40px;
      height: 40px;
      background: #000;
      border: 8px solid #E79A3F;
      border-radius: 50%;
      position: absolute;
      transition: transform 0.05s linear;
    }

    #custom-cursor {
      position: fixed;
      top: 50%;
      left: 50%;
      color: #E79A3F;
      font-size: 1.2rem;
      font-weight: bold;
      font-family: a;
      pointer-events: none;
      mix-blend-mode: difference;
      transform: translate(-50%, -50%);
      cursor: grab;
      user-select: none;
    }

    @media (max-width: 600px) {
      .eyes {
        gap: 1.2rem;
      }
      .eye {
        width: 65px;
        height: 65px;
        border: 2px solid #fff;
      }
      .pupil {
        width: 25px;
        height: 25px;
        border: 6px solid #E79A3F;
      }
      #custom-cursor {
        font-size: 1rem;
      }
    }
  </style>
</head>
<body>
  <div class="eyes">
    <div class="eye"><div class="pupil"></div></div>
    <div class="eye"><div class="pupil"></div></div>
  </div>

  <div id="custom-cursor">قشنگی های تو</div>

  <script>
    const eyes = document.querySelectorAll(".eye");
    const text = document.getElementById("custom-cursor");

    let offsetX = 0, offsetY = 0;
    let dragging = false;

    // For both mouse and touch drag
    function startDrag(e) {
      dragging = true;
      text.style.cursor = "grabbing";
      const rect = text.getBoundingClientRect();
      const clientX = e.clientX || e.touches[0].clientX;
      const clientY = e.clientY || e.touches[0].clientY;
      offsetX = clientX - rect.left - rect.width / 2;
      offsetY = clientY - rect.top - rect.height / 2;
    }

    function stopDrag() {
      dragging = false;
      text.style.cursor = "grab";
    }

    function moveDrag(e) {
      if (!dragging) return;
      const clientX = e.clientX || e.touches[0].clientX;
      const clientY = e.clientY || e.touches[0].clientY;
      const x = clientX - offsetX;
      const y = clientY - offsetY;
      text.style.left = x + "px";
      text.style.top = y + "px";
      updateEyes(x, y);
    }

    // Update eyes based on target position
    function updateEyes(x, y) {
      eyes.forEach((eye) => {
        const rect = eye.getBoundingClientRect();
        const eyeCenterX = rect.left + rect.width / 2;
        const eyeCenterY = rect.top + rect.height / 2;

        const angle = Math.atan2(y - eyeCenterY, x - eyeCenterX);
        const distance = Math.min(15, Math.hypot(x - eyeCenterX, y - eyeCenterY) / 15);

        const pupil = eye.querySelector(".pupil");
        const pupilX = Math.cos(angle) * distance;
        const pupilY = Math.sin(angle) * distance;
        pupil.style.transform = `translate(${pupilX}px, ${pupilY}px)`;
      });
    }

    // Event listeners
    text.addEventListener("mousedown", startDrag);
    text.addEventListener("touchstart", startDrag);

    document.addEventListener("mouseup", stopDrag);
    document.addEventListener("touchend", stopDrag);

    document.addEventListener("mousemove", moveDrag);
    document.addEventListener("touchmove", moveDrag);

    // Initialize: eyes look at text center
    const rect = text.getBoundingClientRect();
    updateEyes(rect.left + rect.width / 2, rect.top + rect.height / 2);
  </script>
</body>
</html>
